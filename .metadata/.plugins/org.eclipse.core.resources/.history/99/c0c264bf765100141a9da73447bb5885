package model;
import java.sql.ResultSet;
import java.util.LinkedList;
import java.util.List;

public class AnimalDatabaseSQLite implements IAnimalDatabase
{
	private String _databasePath;
	private SearchFilterType _filterType;
	private String _searchFilter;
	private ISQLiteWrapper _sqlite;

	private static final String C_SQLQuery = 
		"SELECT *" + 
		"FROM Cats C" +
		"WHERE C.%s LIKE %s%;";
	
	public AnimalDatabaseSQLite(ISQLiteWrapper sqliteWrapper)
	{
		_sqlite = sqliteWrapper;
		
		_filterType = SearchFilterType.Name;
		_searchFilter = "";
	}
	
	public void setSearchFilterType(SearchFilterType filterType)
	{
		_filterType = filterType;
	}

	public void setSearchFiler(String filter)
	{
		_searchFilter = filter;
	}
	
	public List<Cat> getFilteredCats()
	{
		String query = buildQuery();
		
		ResultSet results = _sqlite.executeQuery(query);
		
		if(results == null)
		{
			return new LinkedList<Cat>();
		}
		
		return null;
	}
	
	@Override
	public Cat getSingleCat(String catID) 
	{
		// TODO Auto-generated method stub
		return null;
	}
	
	private String buildQuery()
	{
		String filterColumn;
		
		switch(_filterType)
		{
		case Name: 
			filterColumn = "Name";
			break;
		default:
			filterColumn = "";
		}
		
		return String.format(C_SQLQuery, filterColumn, _searchFilter);
	}
}